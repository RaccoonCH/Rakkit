<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Generic Types | Rakkit</title>
    <meta name="description" content="A framework written in TypeScript that provides REST/GraphQL API and Websocket tools to build amazing server-side applications">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#3a0839">
  <link rel="shortcut icon" href="/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#3a0839">
  <meta name="msapplication-config" content="/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.b5c449e4.css" as="style"><link rel="preload" href="/assets/js/app.cde378e9.js" as="script"><link rel="preload" href="/assets/js/2.d96be7e9.js" as="script"><link rel="preload" href="/assets/js/21.6a3b9e5f.js" as="script"><link rel="prefetch" href="/assets/js/10.aecf0b49.js"><link rel="prefetch" href="/assets/js/11.df9dc6e2.js"><link rel="prefetch" href="/assets/js/12.3b278416.js"><link rel="prefetch" href="/assets/js/13.69323374.js"><link rel="prefetch" href="/assets/js/14.38a4229d.js"><link rel="prefetch" href="/assets/js/15.aa7c2e84.js"><link rel="prefetch" href="/assets/js/16.14dd4f7f.js"><link rel="prefetch" href="/assets/js/17.150d4321.js"><link rel="prefetch" href="/assets/js/18.cff99b80.js"><link rel="prefetch" href="/assets/js/19.7b694b98.js"><link rel="prefetch" href="/assets/js/20.ca08d56f.js"><link rel="prefetch" href="/assets/js/22.7f88cba3.js"><link rel="prefetch" href="/assets/js/23.82ba9afb.js"><link rel="prefetch" href="/assets/js/24.1720b743.js"><link rel="prefetch" href="/assets/js/25.b010b571.js"><link rel="prefetch" href="/assets/js/26.a889ca22.js"><link rel="prefetch" href="/assets/js/27.90a281c7.js"><link rel="prefetch" href="/assets/js/28.e11f2d40.js"><link rel="prefetch" href="/assets/js/29.9045cc84.js"><link rel="prefetch" href="/assets/js/3.22cc39cc.js"><link rel="prefetch" href="/assets/js/30.9cec3ced.js"><link rel="prefetch" href="/assets/js/31.68693ff8.js"><link rel="prefetch" href="/assets/js/32.1990966a.js"><link rel="prefetch" href="/assets/js/33.2a40d71d.js"><link rel="prefetch" href="/assets/js/34.773a0e2f.js"><link rel="prefetch" href="/assets/js/35.15a7eaea.js"><link rel="prefetch" href="/assets/js/36.a096f572.js"><link rel="prefetch" href="/assets/js/37.c47c4bc8.js"><link rel="prefetch" href="/assets/js/38.fd660314.js"><link rel="prefetch" href="/assets/js/39.43aeedbe.js"><link rel="prefetch" href="/assets/js/4.bc2927b0.js"><link rel="prefetch" href="/assets/js/5.e57150a0.js"><link rel="prefetch" href="/assets/js/6.61a82962.js"><link rel="prefetch" href="/assets/js/7.7354f340.js"><link rel="prefetch" href="/assets/js/8.b9aa947b.js"><link rel="prefetch" href="/assets/js/9.e07fc09c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b5c449e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Rakkit" class="logo"> <span class="site-name can-hide">Rakkit</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/raccoonch/rakkit" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/raccoonch/rakkit" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/start/installation.html" class="sidebar-link">Installation</a></li><li><a href="/start/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/start/rakkit.html" class="sidebar-link">The Rakkit class</a></li><li><a href="/start/demos.html" class="sidebar-link">Demos</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GraphQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>REST</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Websocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/contributing.html" class="sidebar-link">Contribution</a></li><li><a href="/dev/changelog.html" class="sidebar-link">Changelog</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="generic-types"><a href="#generic-types" aria-hidden="true" class="header-anchor">#</a> Generic Types</h1> <p><a href="/graphql/type/inheritance">Type Inheritance</a> is a great way to reduce code duplication by extracting common fields to the base class. But in some cases, the strict set of fields is not enough because we might need to declare the types of some fields in a more flexible way, like a type parameter (e.g. <code>items: T[]</code> in case of a pagination).</p> <p>Hence Rakkit also has support for describing generic GraphQL types.</p> <h2 id="how-to"><a href="#how-to" aria-hidden="true" class="header-anchor">#</a> How to?</h2> <p>Unfortunately, the limited reflection capabilities of TypeScript don't allow for combining decorators with standard generic classes. To achieve behavior like that of generic types, we use the same class-creator pattern like the one described in the <a href="/graphql/type/inheritance/#resolver-inheritance">Resolvers Inheritance</a> docs.</p> <p>Start by defining a <code>PaginatedResponse</code> function that creates and returns a <code>PaginatedResponseClass</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">PaginatedResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PaginatedResponseClass</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> PaginatedResponseClass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To achieve generic-like behavior, the function has to be generic and take some runtime argument related to the type parameter:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> PaginatedResponse<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">(</span>TItemClass<span class="token punctuation">:</span> ClassType<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PaginatedResponseClass</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> PaginatedResponseClass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then, add proper decorators to the class which might be <code>@ObjectType</code>, <code>@InterfaceType</code> or <code>@InputType</code>.
It also should have set <code>isAbstract: true</code> to prevent getting registered in the schema:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> PaginatedResponse<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">(</span>TItemClass<span class="token punctuation">:</span> ClassType<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  @<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isAbstract<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PaginatedResponseClass</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> PaginatedResponseClass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>After that, add fields like in a normal class but using the generic type and parameters:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> PaginatedResponse<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">(</span>TItemClass<span class="token punctuation">:</span> ClassType<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// `isAbstract` decorator option is mandatory to prevent registering in schema</span>
  @<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isAbstract<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PaginatedResponseClass</span> <span class="token punctuation">{</span>
    <span class="token comment">// here we use the runtime argument</span>
    @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>TItemClass<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// and here the generic type</span>
    items<span class="token punctuation">:</span> TItem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> Int<span class="token punctuation">)</span>
    total<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

    @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    hasMore<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> PaginatedResponseClass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Finally, use the generic function factory to create a dedicated type class:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">PaginatedUserResponse</span> <span class="token keyword">extends</span> <span class="token class-name">PaginatedResponse</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// we can freely add more fields or overwrite the existing one's types</span>
  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>String<span class="token punctuation">]</span><span class="token punctuation">)</span>
  otherInfo<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>And then use it in our resolvers:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">Resolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UserResolver</span> <span class="token punctuation">{</span>
  @<span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> PaginatedUserResponse <span class="token punctuation">{</span>
    <span class="token comment">// here is your custom business logic,</span>
    <span class="token comment">// depending on underlying data source and libraries</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      items<span class="token punctuation">,</span>
      total<span class="token punctuation">,</span>
      hasMore<span class="token punctuation">,</span>
      otherInfo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can also create a generic class without using the <code>isAbstract</code> option or the <code>abstract</code> keyword.
But types created with this kind of factory will be registered in the schema, so this way is not recommended to extend the types for adding fields.</p> <p>To avoid generating schema errors of duplicated <code>PaginatedResponseClass</code> type names, we must provide our own unique, generated type name:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> PaginatedResponse<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">(</span>TItemClass<span class="token punctuation">:</span> ClassType<span class="token operator">&lt;</span>TItem<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// instead of `isAbstract`, we have to provide a unique type name used in schema</span>
  @<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Paginated</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>TItemClass<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">Response`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">class</span> <span class="token class-name">PaginatedResponseClass</span> <span class="token punctuation">{</span>
    <span class="token comment">// the same fields as in the earlier code snippet</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> PaginatedResponseClass<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then, we can store the generated class in a variable and in order to use it both as a runtime object and as a type, we must also create a type for this new class:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> PaginatedUserResponse <span class="token operator">=</span> <span class="token function">PaginatedResponse</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> PaginatedUserResponse <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> PaginatedUserResponse<span class="token operator">&gt;</span><span class="token punctuation">;</span>

@<span class="token function">Resolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UserResolver</span> <span class="token punctuation">{</span>
  <span class="token comment">// remember to provide a runtime type argument to the decorator</span>
  @<span class="token function">Query</span><span class="token punctuation">(</span><span class="token parameter">returns</span> <span class="token operator">=&gt;</span> PaginatedUserResponse<span class="token punctuation">)</span>
  <span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> PaginatedUserResponse <span class="token punctuation">{</span>
    <span class="token comment">// the same implementation as in the earlier code snippet</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/raccoonch/rakkit/edit/master/docs/graphql/type/generics.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/graphql/type/inheritance.html" class="prev">
          Inheritance
        </a></span> <span class="next"><a href="/graphql/type/interfaces.html">
          Interfaces
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cde378e9.js" defer></script><script src="/assets/js/2.d96be7e9.js" defer></script><script src="/assets/js/21.6a3b9e5f.js" defer></script>
  </body>
</html>
