<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Types and Fields | Rakkit</title>
    <meta name="description" content="A framework written in TypeScript that provides REST/GraphQL API and Websocket tools to build amazing server-side applications">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#3a0839">
  <link rel="shortcut icon" href="/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#3a0839">
  <meta name="msapplication-config" content="/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.b5c449e4.css" as="style"><link rel="preload" href="/assets/js/app.cde378e9.js" as="script"><link rel="preload" href="/assets/js/2.d96be7e9.js" as="script"><link rel="preload" href="/assets/js/26.a889ca22.js" as="script"><link rel="prefetch" href="/assets/js/10.aecf0b49.js"><link rel="prefetch" href="/assets/js/11.df9dc6e2.js"><link rel="prefetch" href="/assets/js/12.3b278416.js"><link rel="prefetch" href="/assets/js/13.69323374.js"><link rel="prefetch" href="/assets/js/14.38a4229d.js"><link rel="prefetch" href="/assets/js/15.aa7c2e84.js"><link rel="prefetch" href="/assets/js/16.14dd4f7f.js"><link rel="prefetch" href="/assets/js/17.150d4321.js"><link rel="prefetch" href="/assets/js/18.cff99b80.js"><link rel="prefetch" href="/assets/js/19.7b694b98.js"><link rel="prefetch" href="/assets/js/20.ca08d56f.js"><link rel="prefetch" href="/assets/js/21.6a3b9e5f.js"><link rel="prefetch" href="/assets/js/22.7f88cba3.js"><link rel="prefetch" href="/assets/js/23.82ba9afb.js"><link rel="prefetch" href="/assets/js/24.1720b743.js"><link rel="prefetch" href="/assets/js/25.b010b571.js"><link rel="prefetch" href="/assets/js/27.90a281c7.js"><link rel="prefetch" href="/assets/js/28.e11f2d40.js"><link rel="prefetch" href="/assets/js/29.9045cc84.js"><link rel="prefetch" href="/assets/js/3.22cc39cc.js"><link rel="prefetch" href="/assets/js/30.9cec3ced.js"><link rel="prefetch" href="/assets/js/31.68693ff8.js"><link rel="prefetch" href="/assets/js/32.1990966a.js"><link rel="prefetch" href="/assets/js/33.2a40d71d.js"><link rel="prefetch" href="/assets/js/34.773a0e2f.js"><link rel="prefetch" href="/assets/js/35.15a7eaea.js"><link rel="prefetch" href="/assets/js/36.a096f572.js"><link rel="prefetch" href="/assets/js/37.c47c4bc8.js"><link rel="prefetch" href="/assets/js/38.fd660314.js"><link rel="prefetch" href="/assets/js/39.43aeedbe.js"><link rel="prefetch" href="/assets/js/4.bc2927b0.js"><link rel="prefetch" href="/assets/js/5.e57150a0.js"><link rel="prefetch" href="/assets/js/6.61a82962.js"><link rel="prefetch" href="/assets/js/7.7354f340.js"><link rel="prefetch" href="/assets/js/8.b9aa947b.js"><link rel="prefetch" href="/assets/js/9.e07fc09c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b5c449e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Rakkit" class="logo"> <span class="site-name can-hide">Rakkit</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/raccoonch/rakkit" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/raccoonch/rakkit" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/start/installation.html" class="sidebar-link">Installation</a></li><li><a href="/start/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/start/rakkit.html" class="sidebar-link">The Rakkit class</a></li><li><a href="/start/demos.html" class="sidebar-link">Demos</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GraphQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>REST</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Websocket</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/contributing.html" class="sidebar-link">Contribution</a></li><li><a href="/dev/changelog.html" class="sidebar-link">Changelog</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="type-definition"><a href="#type-definition" aria-hidden="true" class="header-anchor">#</a> Type definition</h1> <h2 id="types-and-fields"><a href="#types-and-fields" aria-hidden="true" class="header-anchor">#</a> Types and fields</h2> <p>The main idea of Rakkit is to automatically create GraphQL schema definitions from TypeScript classes. To avoid the need for schema definition files and interfaces describing the schema, we use decorators and a bit of reflection magic.</p> <p>Let's start by defining our example TypeScript class which represents our <code>Recipe</code> model with fields for storing the recipe data:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Recipe</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  title<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  ratings<span class="token punctuation">:</span> Rate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  averageRating<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The first thing we must do is decorate the class with the <code>@ObjectType</code> decorator. It marks the class as the <code>type</code> known from the GraphQL SDL or <code>GraphQLObjectType</code> from <code>graphql-js</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Recipe</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  title<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  ratings<span class="token punctuation">:</span> Rate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  averageRating<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then we declare which class properties should be mapped to the GraphQL fields.
To do this, we use the <code>@Field</code> decorator, which is also used to collect metadata from the TypeScript reflection system:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Recipe</span> <span class="token punctuation">{</span>
  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  title<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  ratings<span class="token punctuation">:</span> Rate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  averageRating<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For simple types (like <code>string</code> or <code>boolean</code>) this is all that's needed but due to a limitation in TypeScript's reflection, we need to provide info about generic types (like <code>Array</code> or <code>Promise</code>). So to declare the <code>Rate[]</code> type, we have two options available:</p> <ul><li><code>@Field(type =&gt; [Rate])</code> (recommended, explicit <code>[ ]</code> syntax for Array types)</li> <li><code>@Field(itemType =&gt; Rate)</code> (<code>array</code> is inferred from reflection - also works but is prone to errors)</li> <li><code>@Field(itemType =&gt; [[Rate]])</code> (You can define <strong>multi-dimensiona</strong>l array like this)</li></ul> <p>Why use function syntax and not a simple <code>{ type: Rate }</code> config object? Because, by using function syntax we solve the problem of circular dependencies (e.g. Post &lt;--&gt; User), so it was adopted as a convention. You can use the shorthand syntax <code>@Field(() =&gt; Rate)</code> (or <code>@Field(type =&gt; Rate)</code> to be explicit) if you want to save some keystrokes but it might be less readable for others.</p> <p>By default, all fields are non nullable, just like properties in TypeScript. However, you can change that behavior by providing <code>nullableByDefault: true</code> option in <code>Rakkit.start</code> settings, described in <a href="/graphql/start/bootstrap">bootstrap guide</a>.</p> <p>So for nullable properties like <code>averageRating</code> which might not be defined when a recipe has no ratings yet, we mark the class property as optional with a <code>?:</code> operator and also have to pass the <code>{ nullable: true }</code> decorator parameter. We should be aware that when we declare our type as a nullable union (e.g. <code>string | null</code>), we need to explicitly provide the type to the <code>@Field</code> decorator.</p> <p>In the case of lists, we may also need to define their nullability in a more detailed form. The basic <code>{ nullable: true | false }</code> setting only applies to the whole list (<code>[Item!]</code> or <code>[Item!]!</code>), so if we need a sparse array, we can control the list items' nullability via <code>nullable: items</code> (for <code>[Item]!</code>) or <code>nullable: itemsAndList</code> (for the <code>[Item]</code>) option. Be aware that setting <code>nullableByDefault: true</code> option will also apply to lists, so it will produce <code>[Item]</code> type, just like with <code>nullable: itemsAndList</code>.</p> <p>In the config object we can also provide the <code>description</code> and <code>deprecationReason</code> properties for GraphQL schema purposes.</p> <div class="danger custom-block"><p>If you don't type a field (or query/mutation/subcription) by default the field becomes nullable and the type is Boolean. It returns <code>null</code> if you query it.</p></div> <p>So after these changes our example class would look like this:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">{</span> description<span class="token punctuation">:</span> <span class="token string">&quot;The recipe model&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Recipe</span> <span class="token punctuation">{</span>
  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> <span class="token constant">ID</span><span class="token punctuation">)</span>
  id<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">{</span> description<span class="token punctuation">:</span> <span class="token string">&quot;The title of the recipe&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  title<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>Rate<span class="token punctuation">]</span><span class="token punctuation">)</span>
  ratings<span class="token punctuation">:</span> Rate<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">{</span> nullable<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  averageRating<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which will result in generating the following part of the GraphQL schema in SDL:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Recipe</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> ID<span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> String<span class="token operator">!</span>
  <span class="token attr-name">ratings</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Rate<span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token attr-name">averageRating</span><span class="token punctuation">:</span> Float
<span class="token punctuation">}</span>
</code></pre></div><p>Similarly, the <code>Rate</code> type class would look like this:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Rate</span> <span class="token punctuation">{</span>
  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> Int<span class="token punctuation">)</span>
  value<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  date<span class="token punctuation">:</span> Date<span class="token punctuation">;</span>

  user<span class="token punctuation">:</span> User<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>which results in this equivalent of the GraphQL SDL:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">type</span> <span class="token class-name">Rate</span> <span class="token punctuation">{</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> Int<span class="token operator">!</span>
  <span class="token attr-name">date</span><span class="token punctuation">:</span> Date<span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As we can see, for the <code>id</code> property of <code>Recipe</code> we passed <code>type =&gt; ID</code> and for the <code>value</code> field of <code>Rate</code> we passed <code>type =&gt; Int</code>. This way we can overwrite the inferred type from the reflection metadata. We can read more about the ID and Int scalars in <a href="/graphql/type/scalars">the scalars docs</a>. There is also a section about the built-in <code>Date</code> scalar.</p> <p>Also the <code>user</code> property doesn't have a <code>@Field()</code> decorator - this way we can hide some properties of our data model. In this case, we need to store the <code>user</code> field of the <code>Rate</code> object to the database in order to prevent multiple rates, but we don't want to make it publicly accessible.</p> <p>Note that if a field of an object type is purely calculable (e.g. <code>averageRating</code> from <code>ratings</code> array) and we don't want to pollute the class signature, we can omit it and just implement the field resolver (described in <a href="/graphql/query/resolvers/#field-resolvers">resolvers doc</a>).</p> <p>You can also create <code>Required</code> and <code>Partial</code> type from an ObjectType, InputType or InterfaceType with the <a href="/graphql/type/type-creator">TypeCreator</a>'s API.</p> <h2 id="field-resolver"><a href="#field-resolver" aria-hidden="true" class="header-anchor">#</a> Field resolver</h2> <p>You can define queries in types that are linked to fields. It works the same way as for <a href="/graphql/query/resolvers/#queries-and-mutations">@Query()</a> but you the difference is that you must use the <code>@Field()</code> decorator.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@<span class="token function">ObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Rate</span> <span class="token punctuation">{</span>
  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> Int<span class="token punctuation">)</span>
  value<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  date<span class="token punctuation">:</span> Date<span class="token punctuation">;</span>

  @<span class="token function">Field</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">type</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>String<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">getLinkedUsernames</span><span class="token punctuation">(</span>context<span class="token punctuation">:</span> IContext<span class="token punctuation">)</span><span class="token punctuation">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/raccoonch/rakkit/edit/master/docs/graphql/type/type-definition.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/graphql/start/bootstrap.html" class="prev">
          Bootstrapping
        </a></span> <span class="next"><a href="/graphql/type/inheritance.html">
          Inheritance
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cde378e9.js" defer></script><script src="/assets/js/2.d96be7e9.js" defer></script><script src="/assets/js/26.a889ca22.js" defer></script>
  </body>
</html>
